<html>
	<head>
		<title>Invite User | Cart Chart</title>
		<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="/css/main.css">
		<link rel="stylesheet" type="text/css" href="/css/icons.css">
	</head>

	<body>
		<div class="form">
			<h2 class="title">Invite A New User</h2>
			<div class="form_item"><div class="form_item_group"><span class="form_item_extra"><span class="icon_profile"></span></span><input class="form_item" type="text" name="first_name" id="first_name" placeholder="First Name"></div></div>
			<div class="form_item"><div class="form_item_group"><span class="form_item_extra"><span class="arrow_carrot-right"></span></span><input class="form_item" type="text" name="last_name" id="last_name" placeholder="Last Name"></div></div>
			<div class="form_item"><div class="form_item_group"><span class="form_item_extra"><span class="icon_mail"></span></span><input class="form_item" type="email" name="email" id="email" placeholder="Email"></div></div>
			<div class="form_item"><div class="form_item_group submit_group"><button class="submit" onclick="create_user();">Invite</button></div></div>
			<div class="align_center"><span class="error_message" id="error_text"></span></div>
		</div>

		<!-- Firebase Scripts -->
		<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-analytics.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
		<script src="/main.js"></script>

		<!-- General Scripts -->
		<script>
			// Show / Hide Password
			function show_hide_password() {
				var show_password_checkbox = document.getElementById("show_password");
				var password_input = document.getElementById("password");
				if(show_password_checkbox.checked == true) {
					password_input.type="text"
				} else {
					password_input.type="password"
				}
			}

      function create_user() {
        var email_input = document.getElementById("email");
        var email = email_input.value;
        var password = "{emptypassword}";
				var first_name_value = document.getElementById("first_name").value;
				var last_name_value = document.getElementById("last_name").value;
        secondaryApp.auth().createUserWithEmailAndPassword(email, password).then(function(firebaseUser) {
					var uid = user.uid;
					firebase.database().ref('users/' + uid).set({
				    firstname: first_name_value,
				    lastname: last_name_value
				  });
          secondaryApp.auth().signOut();

        }).catch(function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
          if (errorCode == "auth/invalid-email") {
            setError("Please enter a valid email address");
          } else if (errorCode == "auth/email-already-in-use") {
            setError("That user has already been invited");
          }

        });
      }

		</script>

		<script src="/inputs.js"></script>

	</body>
</html>
