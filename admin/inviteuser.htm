<html>
	<head>
		<title>Invite User | Cart Chart</title>
		<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="/Users/robbi/OneDrive/Cart%20Scheduler/css/main.css">
		<link rel="stylesheet" type="text/css" href="/Users/robbi/OneDrive/Cart%20Scheduler/css/icons.css">
	</head>

	<body>
		<div class="form">
			<h2 class="title">Invite A New User</h2>
			<div class="form_item"><div class="form_item_group"><span class="form_item_extra"><span class="icon_mail"></span></span><input class="form_item" type="email" name="email" id="email" placeholder="Email"></div></div>
			<div class="form_item"><div class="form_item_group submit_group"><button class="submit" onclick="create_user();">Invite</button></div></div>
			<div class="align_center"><span class="error_message" id="error_text"></span></div>
		</div>

		<!-- Firebase Scripts -->
		<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-analytics.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
		<script>
		  // Your web app's Firebase configuration
		  var firebaseConfig = {
		    apiKey: "AIzaSyDccM8NijKEohOCjqGQ0ikeyMpf8kI3tz4",
		    authDomain: "jw-cart-scheduler.firebaseapp.com",
		    databaseURL: "https://jw-cart-scheduler.firebaseio.com",
		    projectId: "jw-cart-scheduler",
		    storageBucket: "jw-cart-scheduler.appspot.com",
		    messagingSenderId: "88108065951",
		    appId: "1:88108065951:web:17aa36f528d6db6977aeaa",
		    measurementId: "G-8J2DPL43FW"
		  };
      var config = {
        apiKey: "AIzaSyDccM8NijKEohOCjqGQ0ikeyMpf8kI3tz4",
        authDomain: "jw-cart-scheduler.firebaseapp.com",
        databaseURL: "https://jw-cart-scheduler.firebaseio.com"
      };
      var secondaryApp = firebase.initializeApp(config, "Secondary");

		  // Initialize Firebase
		  firebase.initializeApp(firebaseConfig);
		  firebase.analytics();
			var database = firebase.database();
		</script>

		<!-- General Scripts -->
		<script>
			// Show / Hide Password
			function show_hide_password() {
				var show_password_checkbox = document.getElementById("show_password");
				var password_input = document.getElementById("password");
				if(show_password_checkbox.checked == true) {
					password_input.type="text"
				} else {
					password_input.type="password"
				}
			}

      function create_user() {
        var email_input = document.getElementById("email");
        var email = email_input.value;
        var password = "{emptypassword}";
        secondaryApp.auth().createUserWithEmailAndPassword(email, password).then(function(firebaseUser) {
          secondaryApp.auth().signOut();

        }).catch(function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
          if (errorCode == "auth/invalid-email") {
            setError("Please enter a valid email address");
          } else if (errorCode == "auth/email-already-in-use") {
            setError("That user has already been invited");
          }

        });
      }

			function setError(value) {
				document.getElementById('error_text').innerHTML = value;
			}

      function changePage(page) {
				var offline = window.location.href;
				var final_page;

				if (offline.includes("file:///")) {
					final_page = "/Users/robbi/OneDrive/Cart%20Scheduler/" + page;
				} else {
					final_page = "/" + page;
				}

				if (!final_page.includes(".")) {
					final_page = final_page + ".htm";
				}

				window.location = final_page;
			}

		</script>

	</body>
</html>
